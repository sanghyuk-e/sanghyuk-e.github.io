---
title : "CHAPTER06: 옵셔널 - 1. 옵셔널 타입 선언과 정의"
excerpt: "스위프트 문법 스터디"
tagline: "스위프트 문법 스터디"
header:
  teaser: /assets/images/posts/Swift-Grammar/swift.png
  overlay_image: /assets/images/posts/Swift-Grammar/swift.png
  overlay_filter: 0.5
  
categories:
    - Swift-Grammar
tags:
    - Swift
    - Swift-Grammar
    - 꼼곰한 재은 씨의 스위프트:문법편
    - 이재은
    - 루비페이퍼
    - ISBN:979-11-86710-23-4
toc: true
toc_sticky: true
---

![Swift](/assets/images/posts/Swift-Grammar/swift.png)

# 1. 옵셔널 타입 선언과 정의 

옵셔널(Optional)은 스위프트에서 도입된 새로운 개념으로서 언어 차원에서 프로그램의 안정성을 높이기 위해 사용하는 개념이다. 옵셔널의 개념을 한 문장으로 정의하자면 'nil을 사용할 수 있는 타입과 사용할 수 없는 타입을 구분하고, 사용할 수 있는 타입을 가리켜 옵셔널 타입(Optional Type)이라고 부른다'라고 할 수 있다.

여기서 말하는 nil이란, **값이 없음**을 의미하는 특수한 값이다. 정수형의 0이나, 문자열의 ""과는 다른, 말 그대로 순수하게 하무 값도 없다는 것을 의미한다. 이런 특수성 때문에 nil은 종종 실제 값으로는 처리할 수 없는, 무엇인가 문제가 발생했을 때 이를 의미하기 위해 사용된다.

앞에서 잠깐 다룬 딕셔너리를 떠올려보자. 저장된 값을 읽으려면 딕셔너리 변수명 뒤에 대괄호와 함께 키 값을 넣어주어야 하는데, 종종 잘못된 키를 대입할 때가 있다. 오타이거나, 혹은 이미 삭제된 키를 사용하는 경우가 대표적이다. 이같은 상황에서 스위프트는 우리에게 뭔가 '너 지금 잘못했어. 그 키는 지금의 딕셔너리에는 존재하지 않아'라고 알려주고 싶어한다. 

하지만 오류를 발생시키는 것은 그리 좋지 않다. 겨우 딕셔너리 키에 대한 잘못된 참조 하나 때문에 실행을 중단시키는 것은 매정할 뿐만 아니라, 스위프트는 최대한 안정성을 높이고자 노력하는 언어이다. 하지만 결과값을 공백을 반환할 수는 없다. 그랬다면 사용자가 자신이 실수한 것을 알지 못하고 정말 '그 키에는 공백이 저장되어 있었나보군'이라고 착각하게 될지도 모르기 때문이다. 이런 상황에서 스위프트는 오류도 발생시키지 않고 뭔가 문제가 있었다는 것도 알려주기 위해 nil이라는 값을 반환하는 것이다.

```swift
let capital = ["KR": "Seoul", "CN": "Beijing", "JP": "Tokyo"]
capital["ko"] // nil
```

이처럼 스위프트에서는 값을 처리하는 과정에 문제가 있을 경우 많은 부분에서 오류를 발생시키는 대신 결과값을 nil로 반환한다. 하지만 모든 타입이 nil을 반환할 수 있는 것은 아니며 오직 옵셔널 타입만 nil을 반환할 수 있다. 다시 말해, nil을 반환하려면 해당 값이 옵셔널 타입으로 정의되어 있어야 한다.

여기에서 중요한 것은 "오류가 발생할 가능성"이다. 경우에 따라서는 오류가 발생하지 않을 수도 있지만, 언젠가 오류가 발생할 수 있는 가능성이 아주 조금이라도 있다면 모두 옵셔널 타입으로 정의해야 한다. 이해를 돕기 위해 또다른 예를 살펴보자. 문자열 "123"을 숫자로 변환해야 한다고 가정해 보겠다.

일반적으로 사람의 인식에서는 "그저 큰따옴표만 떼면 된다"라고 생각할지도 모르겠지만, 프로그래밍에서 문자열 "123"을 숫자로 바꾸려면 다소 복잡한 변환 과정을 거쳐야 한다. 다행히 스위프트를 포함한 많은 프로그래밍 언어에서는 문자열을 숫자로 변환해주는 간편한 방법을 제공한다. 스위프트에서는 Int 객체의 생성자 옵션에 숫자로 변환할 문자열을 넣어주면 정수로 변환된다. 사용 형식은 다음과 같다.

```swift
Int(바꿀 문자열)
```

예를 들어, 문자열 "123"을 숫자로 바꾸려면 다음과 같이 작성하면 된다. 상수 num은 문자열 "123"이 아니라 정수 123이 대입된 Int 타입의 상수로 정의된다.

```swift
let num = Int("123")
```

다른 값을 넣어도 마찬가지이다. 문자열을 정수로 변환한 값을 얻을 수 있따. 그런데 만약 "123"이나 "456"처럼 숫자로 바꿀 수 있는 문자열 대신, 아래와 같이 문자열을 인자값으로 넣으면 어떻게 될까?

```swift
let num = Int("Swift")
```

무척 난감한 상황이다. 일반 문자열은 숫자로 변환할 수 없기 떄문이다. 따라서 컴파일러는 이럴 떄 "죄송합니다. 이 문자열은 숫자로 변환할 수 없습니다"라고 난감함을 표현해야 한다. 개발자가 상황을 이해하고 적절히 대응할 수 있는 구문을 보완할 수 있도록 말이다.

대부분 프로그래밍 언어에서는 이런 상황을 오류로 처리하거나 혹은 예외사항으로 처리한다. 오류 처리 구문을 사용할 수 있는 대표적인 언어인 자바는 이럴 떄 NumberFormatException() 예외를 발생함으로써 개발자가 인지하고 이에 대응하는 코드를 작성할 수 있도록 돕는다. 비단 자바뿐만 아니라 PHP도 오류 코드를 발생시키고, 자바스크립트 역시 NaN을 반환하여 변환에 실패했음을 알려준다.

그러나 스위프트는 조금 다르다. 언어의 안정성을 위해 가급적 오류를 발생시키지 않으려고 노력한다. 오류가 발생하면 프로그램의 실행 흐름이 중단되고 경우에 따라 앱의 동작이 멈추거나 아예 꺼져버릴 수도 있으므로, 언어의 안정성을 위해서는 될 수 있으면 피해야 하는 상황일 수밖에 없다. 이런 맥락에서 스위프트는 문자열의 정수 변환이 실패하더라도 실행을 중지시키거나 오류를 발생시키지 않고 억지로 값을 반환하려고 노력한다. 반환하는 값이 그 무엇이 도든 간에 말이다.



[![Xcode 각 부분과 명칭](/assets/images/posts/Swift-Grammar/2020-11-05-2-5/1.png)](/assets/images/posts/Swift-Grammar/2020-11-05-2-5/1.png)




--- 

<br/>
<center>
<a href="https://sanghyuk.dev/swift-grammar/2-4/" class="btn btn--info">이전 내용 보기</a> 
<a href="https://sanghyuk.dev/swift-grammar/2-5/" class="btn btn--info">다음 내용 보기</a>
</center>